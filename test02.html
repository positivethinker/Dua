<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DUA AND DARUD PLAYER</title>
  <style>
    body {
      font-family: Chivo, sans-serif;
      text-align: center;
      padding: 20px;
      font-size: 26px;
      background: #f7fafc;
    }
    .main-row {
      display: flex;
      justify-content: center;
      align-items: stretch;
      gap: 40px;
      flex-wrap: wrap;
      margin: 0 auto 10px auto;
      width: 100%;
      max-width: 1200px;
    }
    .controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 390px;
      max-width: 390px;
      height: 600px;
      max-height: 90vh;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      overflow: hidden;
      padding: 0 0 10px 0;
    }
    .controls-top-row {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      gap: 16px;
      margin-top: 18px;
      margin-bottom: 8px;
    }    
    .play-all-btn {
      font-size: 20px;
      padding: 4px 20px;
      border-radius: 8px;
      border: none;
      background: black;
      color: #fff;
      cursor: pointer;
      width: 46%;
      min-width: 120px;
      max-width: 220px;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .play-all-btn:hover {
      background: #0056b3;
    }
    #allSectionsTimer {
      font-size: 18px;
      color: #d9534f;
      font-weight: bold;
      margin-left: 0;
      min-width: 110px;
      text-align: left;
      background: #f7fafc;
      border-radius: 6px;
      padding: 4px 10px;
      border: 1px solid #eee;
      display: inline-block;
    }
    .controls-scroll {
      overflow-y: auto;
      width: 100%;
      padding: 0 20px;
      flex: 1 1 auto;
    }
    .section-header {
      font-size: 22px;
      font-weight: bold;
      color: #007bff;
      margin: 18px 0 6px 0;
      text-align: center;
      width: 100%;
      border-bottom: 1px solid #eee;
      padding-bottom: 2px;
    }
    .section-btn {
      font-size: 12px;
      padding: 4px 20px;
      margin: 12px 0;
      border-radius: 8px;
      border: none;
      background: black;
      color: #fff;
      cursor: pointer;
      width: 60%;
      transition: background 0.2s;
    }
    .section-btn:hover {
      background: #0056b3;
    }
    .video-list {
      list-style: none;
      padding: 0;
      margin: 0 0 10px 0;
      margin-left: 20px;
      width: 90%;
      text-align: left;
    }
    .video-list li {
      font-size: 18px;
      margin: 4px 0;
      padding: 4px 0;
      border-bottom: 1px dotted #ddd;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background-color 0.3s;
    }
    .video-list li.current-video {
      background-color: #e6f7ff;
      font-weight: bold;
      border-left: 4px solid #007bff;
      padding-left: 10px;
    }
    .video-serial {
      font-weight: bold;
      color: #888;
      margin-right: 8px;
      min-width: 28px;
      text-align: right;
      display: inline-block;
    }
    .video-label {
      flex: 1;
    }
    .video-loop {
      color: #007bff;
      font-size: 16px;
      margin-left: 10px;
      font-weight: bold;
    }
    .player-col {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-width: 390px;
      max-width: 640px;
      height: 600px;
      max-height: 90vh;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      padding: 0 0 10px 0;
    }
    #player {
      margin: 0 auto;
      width: 100%;
      height: 100%;
      min-width: 320px;
      min-height: 360px;
      aspect-ratio: 16 / 9;
      background: #000;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      display: flex;
      justify-content: center;
      align-items: center;
      flex: 1 1 auto;
    }
    #tooltipText {
      font-size: 16px;
      color: #555;
      font-style: italic;
      max-width: 640px;
      margin: 15px auto 10px auto;
      min-height: 20px;
      text-align: center;
    }
    p {
      font-size: 18px;
      margin-bottom: 10px;
      color: #333;
      letter-spacing: 1px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    #currentLoop, #remainingLoop {
      font-weight: bold;
      color: #007bff;
    }
    #sectionTimer {
      font-size: 18px;
      color: #d9534f;
      font-weight: bold;
      margin-left: 10px;
    }
    .skip-btn {
      font-size: 12px;
      padding: 4px 16px;
      border-radius: 8px;
      border: none;
      background: #03ecfc;
      color: black;
      cursor: pointer;
      margin-left: 8px;
      transition: background 0.2s, color 0.2s;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .skip-btn:hover {
      background: #007bff;
      color: #fff;
    }
    .section-select {
      font-size: 20px;
      padding: 8px 12px;
      margin: 18px 0 10px 0;
      border-radius: 8px;
      border: 1px solid #bbb;
      width: 90%;
      max-width: 340px;
      background: #f7fafc;
      color: #333;
    }
    @media (max-width: 1100px) {
      .main-row {
        flex-direction: column;
        align-items: center;
      }
      .controls, .player-col, #player {
        max-width: 100%;
        min-width: 0;
        height: auto;
      }
      .controls, .player-col {
        height: auto;
        min-width: 0;
      }
      .controls-top-row {
        flex-direction: column;
        gap: 8px;
      }
    }
    @media (max-width: 600px) {
      .main-row {
        flex-direction: column;
        gap: 24px;
      }
      .controls, .player-col, #player {
        max-width: 100%;
      }
      #tooltipText {
        font-size: 16px;
      }
      #sectionTimer, #allSectionsTimer {
        display: block;
        margin-left: 0;
        margin-top: 5px;
      }
      .skip-btn {
        margin-left: 0;
        margin-top: 5px;
      }
    }
  </style>
</head>
<body>
  <h1>DUA AND DARUD PLAYER</h1>
  <div class="main-row">
    <div class="controls">
      <div class="controls-top-row">
        <button class="play-all-btn" onclick="playAllSections()">
          ▶️ Play All 
        </button>
        <span id="allSectionsTimer"></span>
      </div>
      <select class="section-select" id="sectionDropdown" onchange="showSelectedSection()">
        <!-- Options will be generated by JS -->
      </select>
      <div class="controls-scroll" id="sectionControls"></div>
    </div>
    <div class="player-col">
      <div id="player"></div>
      <div id="tooltipText"></div>
      <p>
        PLAYED: <span id="currentLoop">0</span> |
        REMAIN: <span id="remainingLoop">0</span>
        <span id="sectionTimer"></span>
        <button class="skip-btn" onclick="skipCurrentContent()" title="Skip to next ▶️">⏭️ Skip</button>
      </p>
    </div>
  </div>
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    // ... (Paste your full videoSections array here, as in your last post) ...
    // For demo, here's a short sample. Replace with your full array.
   const videoSections = [
      {
        name: "প্রতিদিন",
        videos: [
          { id: "14uh3215Vls", start: 0, end: 30, label: "দরুদ শরীফ", tooltip: "দরুদ শরীফ", loop: 7 },
          { id: "HfNiDn9u4Z4", start: 22, end: 35, label: "Al-Mu'minun (97-98)", tooltip: "Wa qur rabbi a’uzu bika min hamazatisy syayatin, Wa a’uzu bika rabbi ay yahdurun", loop: 7 },
          { id: "_P75cWrTGPs", start: 124.2, end: 131.8, label: "আলহামদুলিল্লাহ", tooltip: "প্রতিদিন 3 বার", loop: 3 },
          { id: "BxNUCjRT6cc", start: 30, end: 33.5, label: "Best One Word Dua (SAW)", tooltip: "প্রতিদিন 3 বার", loop: 3 },
          { id: "FFefhd3C7jc", start: 86.3, end: 92, label: "বিসমিল্লাহিল্লাজি লা- য়াজুর্রু", tooltip: "প্রতিদিন 3 বার", loop: 3 },
          { id: "jNPhGaAcpSk", start: 0, end: 90, label: "সূরা দুহা", tooltip: "সূরা দুহা", loop: 1 },
          { id: "3NjYi7mCtDs", start: 34.5, end: 39, label: "সুবহানাল্লাহি ওয়া বিহামদিহী", tooltip: "প্রতিদিন ১০০ বার | আস্তাগফিরুল্লাহ ১০০ বার", loop: 100 },
          { id: "3NjYi7mCtDs", start: 39, end: 40, label: "আস্তাগফিরুল্লাহ", tooltip: "আস্তাগফিরুল্লাহ ১০০ বার", loop: 100 },
          { id: "fOPmnFezp5w", start: 14.9, end: 16, label: "ইয়া জাল জালালি ওয়াল ইকরাম", tooltip: "প্রতিদিন ১০০ বার", loop: 100 },
          { id: "uv3VXLVK6FQ", start: 10, end: 30, label: "আল-ইখলাস", tooltip: "প্রতিদিন 10 বার", loop: 10 },
          { id: "Ar8COmg9hWE", start: 145.4, end: 147, label: "লা ইলাহা ইল্লাল্লাহ", tooltip: "প্রতিদিন ১০০ বার", loop: 100 },
          { id: "cxYnDb_kmHo", start: 4, end: 7, label: "আল্লাহুম্মাকফিনীহিম বিমা শি-তা", tooltip: "প্রতিদিন 10 বার : হে আল্লাহ আমাকে তাদের থেকে রক্ষা করুন যেভাবে আপনি চান।", loop: 10 },
          { id: "p5ry7uLeoCY", start: 19, end: 23.4, label: "সুবহানাল্লাহ | ওয়ালহামদুলিল্লাহ | ওয়া লা ইলাহা ইল্লাল্লাহ | ওয়াল্লাহু আকবার", tooltip: "প্রতিদিন ১০০ বার", loop: 100 },
          { id: "aTPiHKiJ5Xg", start: 2.3, end: 8.7, label: " লাহুল মুলকু", tooltip: "প্রতিদিন ১০০ বার", loop: 100 },
          { id: "HcY-e7-lBBQ", start: 9.7, end: 29, label: "১০ লক্ষ নেকি পাওয়ার দোয়া", tooltip: "প্রতিদিন ১০ বার", loop: 7 },
          { id: "uO5VHphOZzQ", start: 0, end: 856.8, label: "যাদুকরের প্রতি অভিশাপ", tooltip: "প্রতিদিন ১ বার", loop: 1 },
          { id: "5R06LRdUCSE", start: 12, end: 1966, label: " সূরা কাহফ", tooltip: "প্রতিদিন ১ বার", loop: 1 },
        ]
      },
      {
        name: "AFTER NAMAJ",
        videos: [
          { id: "dGYQBskQBRw", start: 15, end: 21.8, label: "আল্লাহুম্মা আইন্নি", tooltip: "আল্লাহুম্মা আইন্নি আলা জিকরিকা ওয়া শুকরিকা ওয়া হুসনি ইবাদাতিকা", loop: 7 },
          { id: "b8GKbzll4bM", start: 0, end: 4.5, label: "Cover All", tooltip: "Cover All", loop: 7 },
          { id: "L30c6Axa06A", start: 0, end: 51, label: "Surah Al-Fatiha", tooltip: "Surah Al-Fatiha", loop: 1 },
          { id: "dfZYTEgfwDc", start: 0, end: 30, label: "Ayatul Kursi", tooltip: "Ayatul Kursi", loop: 1 },
          { id: "8t-Jwm72UD4", start: 0, end: 129, label: "SURAH AL-IMRAN", tooltip: "SURAH AL-IMRAN", loop: 1 },
          { id: "Xx85iIXcQNs", start: 5, end: 6, label: "আল্লাহু আকবার", tooltip: " ১ বার ", loop: 1 },
          { id: "Xx85iIXcQNs", start: 7.7, end: 9, label: "আস্তাগফিরুল্লাহ", tooltip: "আমি আল্লাহর ক্ষমাপ্রার্থনা করছি ।", loop: 3 },
          { id: "paplOoJGGxg", start: 1, end: 10, label: "সুবহানাল্লাহ | ওয়ালহামদুলিল্লাহ | ওয়া লা ইলাহা ইল্লাল্লাহ | ওয়াল্লাহু আকবার", tooltip: "প্রতিদিন ১০০ বার", loop: 33 },
          { id: "Xx85iIXcQNs", start: 19, end: 25.2, label: "ADD", tooltip: "আল্লাহুম্মা ইন্নাকা আফুউন কারীম, তুহিব্বুল আফুওয়া ফাফু আন্নি", loop: 1 },
          { id: "cemBjVIDoFs", start: 27.8, end: 34.4, label: "ইয়া হাইয়ু ইয়া কাইয়ুম, লা ইলাহা ইল্লা আনতা বিরাহমাতিকা আসতাগিজ", tooltip: "ইয়া হাইয়ু ইয়া কাইয়ুম, লা ইলাহা ইল্লা আনতা বিরাহমাতিকা আসতাগিজ", loop: 40 },
          { id: "97TteyKVyiE", start: 0, end: 12, label: "আল্লাহু লাতিফুম্ বি-ইবাদিহি ইয়ারজুকু মাইয়্যাশায়ু, ওয়া হুয়াল কাভিয়্যুল আজিজ", tooltip: "আল্লাহ তাঁর বান্দাদের প্রতি দয়ালু। তিনি যাকে ইচ্ছা, রিযিক দান করেন। তিনি প্রবল, পরাক্রমশালী। (সুরা শুরা : আয়াত ১৯)", loop: 70 },
          { id: "U_5o4JEINfQ", start: 11.8, end: 17, label: "দোয়া ইউনুস", tooltip: "প্রতিদিন 40 বার", loop: 40 },
          { id: "z03wnWxvGeI", start: 0, end: 14, label: "রদিতুবিল্লাহি রব্বাও ওয়া বিল ইসলামি দিনাও ওয়া বি মুহাম্মাদিন নাবিয়্যাও ওয়া রাসূলা।", tooltip: "আমি আল্লাহকে প্রতিপালক হিসাবে, ইসলামকে দ্বীন হিসাবে এবং মুহাম্মাদ সাল্লাল্লাহু আলাইহি ওয়া সাল্লামকে নবী ও রাসূল হিসাবে পেয়ে খুশি হয়েছি। ", loop: 3 },
        ]
      },
      {
        name: "ইস্তেগফার : 3:00 AM",
        videos: [
          { id: "3b2NujLLSpw", start: 6, end: 43, label: "সাইয়েদুল ইস্তেগফার", tooltip: "আল্লাহুম্মা আংতা রাব্বি লা ইলাহা ইল্লা আংতা খালাক্বতানি ওয়া আনা আবদুকা ওয়া আনা আলা আহ্দিকা ওয়া ওয়াদিকা মাসতা তায়াতু, আউজু বিকা মিন শাররি মা ছনাতু, আবুউ লাকা বিনিমাতিকা আলাইয়া, ওয়া আবুউ লাকা বিজাম্বি; ফাগফির লি, ফা ইন্নাহু লা ইয়াগফিরুজ-জুনুবা ইল্লা আংতা।", loop: 1 },
          { id: "Fbm63isVYmY", start: 23.4, end: 30, label: "আস্তাগফিরুল্লাহ হাল্লাজি", tooltip: "আস্তাগফিরুল্লাহ হাল্লাজি লা ইলাহা ইল্লা হুয়াল হাইয়ুল কাইয়ুম ওয়াতুবি ইলাইহি।", loop: 100 },
          { id: "F8J09kBMsJU", start: 0, end: 7, label: "আসতাগফিরুললাহা ওয়া আতুবুহ ইলাইহ", tooltip: "আসতাগফিরুললাহা ওয়া আতুবুহ ইলাইহ", loop: 100 },
          { id: "VNoq93-17Ho", start: 2, end: 22, label: "আস্তাগফিরুল্লাহ", tooltip: "আমি আল্লাহর ক্ষমাপ্রার্থনা করছি ।", loop: 10 },
          { id: "V4WF16FhLcg", start: 3.8, end: 6, label: "রাব্বির ফিরলি জুনুবি", tooltip: "রাব্বির ফিরলি জুনুবি প্রতিদিন 21 বার", loop: 21 },
          { id: "U_5o4JEINfQ", start: 11.8, end: 17, label: "দোয়া ইউনুস", tooltip: "প্রতিদিন ১০০ বার", loop: 100 },
          { id: "UFMf485VTiI", start: 45, end: 48.2, label: "লা হাওলা ওয়ালা কুওয়াতা ইল্লা বিল্লাহিল আলিউল আজিম", tooltip: "আল্লাহ ছাড়া কোনো ভরসা নেই, কোনো ক্ষমতা বা শক্তি নেই | প্রতিদিন ১০০ বার", loop: 100 },
          { id: "aPbwuL9-C7A", start: 0, end: 22, label: "ইস্তেগফার 03", tooltip: "আল্লাহুম্মা ইন্নাকা আফুউন কারীম, তুহিব্বুল আফুওয়া ফাফু আন্নি", loop: 1 }
        ]
      },
      {
        name: "রিজিক",
        videos: [
          { id: "SEh3c0Va5qk", start: 5, end: 8.5, label: "আল্লাহুম্মা ইন্নি আস আলুকা মিন ফাদলিক", tooltip: "আল্লাহুম্মা ইন্নি আস আলুকা মিন ফাদলিক", loop: 7 },
          { id: "d-AzKo4dOoc", start: 0, end: 11, label: "সূরা আল-বাকারা থেকে দুআ (2:201)", tooltip: "সূরা আল-বাকারা থেকে দুআ (2:201).", loop: 7 },
          { id: "uv3VXLVK6FQ", start: 10, end: 30, label: "আল-ইখলাস", tooltip: "প্রতিদিন 3 বার with Salam", loop: 3 },
          { id: "r-pn59nB5RQ", start: 0, end: 7, label: "হযরত মুসার দুআ (কুরআন 28:24)", tooltip: "হযরত মুসার দুআ (কুরআন 28:24).", loop: 7 },
          { id: "H1UVp0XlhBs", start: 5.1, end: 11, label: "সম্পদ ও হেদায়েতের জন্য দুআ", tooltip: "সম্পদ ও হেদায়েতের জন্য দুআ", loop: 7 },
          { id: "K6BWL4gfCB8", start: 4.1, end: 9.8, label: "আল্লাহুম্মা ইন্নি আস'আলুকা", tooltip: "আল্লাহুম্মা ইন্নি আস'আলুকা ", loop: 21 },
          { id: "SNuoTZTeGMM", start: 676.2, end: 693, label: "কাদিয়াল হাজত", tooltip: "কাদিয়াল হাজত ", loop: 7 },
          { id: "fX2SO9OpSXA", start: 14, end: 27.8, label: "ঋণ মুক্তির দোয়া - 01", tooltip: "ঋণ মুক্তির দোয়া - Mornig and Evening", loop: 7 },
          { id: "xGTdWJQhOhw", start: 151.4, end: 167, label: "ঋণ মুক্তির দোয়া - 02", tooltip: "ঋণ পরিশোধ হবে ইনশাআল্লাহ ", loop: 7 },
          { id: "UkbiXPvZPpw", start: 12.8, end: 16.2, label: "ঋণ মুক্তির দোয়া - 03", tooltip: "ঋণ পরিশোধ হবে ইনশাআল্লাহ ", loop: 7 },
          { id: "JOHf1hU1EbM", start: 263.4, end: 286.8, label: "ঋণ মুক্তির দোয়া - 04", tooltip: "ঋণ পরিশোধ হবে ইনশাআল্লাহ ", loop: 7 },
          // { id: "JOHf1hU1EbM", start: 263.4, end: 286.8, label: "ঋণ মুক্তির দোয়া - 04", tooltip: "ঋণ পরিশোধ হবে ইনশাআল্লাহ ", loop: 7 },
          { id: "gS3G6DK3ffo", start: 15, end: 28, label: "আল্লাহুম্মা ইন্নি আসআলুকাল হুদা", tooltip: "আল্লাহুম্মা ইন্নি আসআলুকাল হুদা, ওয়াত তুকা, ওয়াল আফাফা ওয়াল গিনা", loop: 7 },
          { id: "4srFuYLGmhU", start: 26.2, end: 34, label: "আল্লাহুম্মাগফিরলি জাম্বি", tooltip: "আল্লাহুম্মাগফিরলি জাম্বি ওয়া ওয়াসসি'লি ফি দারি ওয়া বারিকলি ফি রিজক্বি।", loop: 7 },
          { id: "Rwp1d-eRP1Q", start: 0, end: 40, label: "সুরা কুরাইশ", tooltip: "সুরা কুরাইশ", loop: 1 },
          { id: "N78PGdl2-Wo", start: 0, end: 398, label: "Surah Al-Waqiah", tooltip: "Surah Al-Waqiah", loop: 1 }
        ]
      },
      {
        name: "OBAY",
        videos: [
          { id: "14uh3215Vls", start: 0, end: 30, label: "দরুদ শরীফ", tooltip: "দরুদ শরীফ", loop: 7 },
          { id: "KCpucEqWHgI", start: 0, end: 18, label: "সূরা আল ফুরকান : ৭৪ আয়াত", tooltip: "সূরা আল ফুরকান : ৭৪ আয়াত.", loop: 21 },
          { id: "TAXr0OvvFd0", start: 14.5, end: 24, label: "সূরা ত্বা-হা : ৩৯ আয়াত", tooltip: "সূরা ত্বা-হা : ৩৯ আয়াত.", loop: 21 },
          { id: "vzNIHXjRgn4", start: 163, end: 165.1, label: "ইন্নাল্লাহা ইয়াস-মাউ মাই-ইয়াসা", tooltip: "ইন্নাল্লাহা ইয়াস-মাউ মাই-ইয়াসা", loop: 11 },
          { id: "0vhiEaMU2Rc", start: 193, end: 204, label: "আল্লাহুম্মা ইন্নি আস আলুকা বিয়ান্নি", tooltip: "আল্লাহুম্মা ইন্নি আস আলুকা বিয়ান্নি আশহাদু আন্নাকা আনতাল্লাহ,লা ইলাহা ইল্লা আনতাল আহাদুস সামাদ আল্লাজী লাম ইয়ালিদ ওয়ালাম ইয়ুলাদ, ওয়ালাম ইয়া কুল্লাহু কুফুওয়ান আহাদ।", loop: 11 },
          { id: "Rs_g65sSGqk", start: 28, end: 29, label: "ইয়া ওয়াদুদু (313)", tooltip: "ইয়া ওয়াদুদু", loop: 313 },
          { id: "wMka1xyhV_w", start: 20.5, end: 21.4, label: "ইয়া লাতিফু (133)", tooltip: "ইয়া লাতিফু", loop: 133 },
          { id: "DNgrz8oYHcI", start: 6.5, end: 9, label: "হাসবুনাল্লাহু ওয়া নি’ মাল ওয়াকিল", tooltip: "হাসবুনাল্লাহু ওয়া নি’ মাল ওয়াকিল prayer.", loop: 100 },
          { id: "14uh3215Vls", start: 0, end: 30, label: "দরুদ শরীফ", tooltip: "দরুদ শরীফ", loop: 7 }
        ]
      },
      {
        name: "সব সমস্যা সমাধানে",
        videos: [
          { id: "2ePe6dTkoGg", start: 30.4, end: 39.2, label: "ইয়া হাইয়্যু ইয়া কাইয়্যুম বিরাহমাতিকা আস্তাগি-স", tooltip: "ইয়া হাইয়্যু ইয়া কাইয়্যুম বিরাহমাতিকা আস্তাগি-স", loop: 3 },
          { id: "maggkOnU6JY", start: 0, end: 9, label: "আলহামদু লিল্লা হিল্লাজি আফানি", tooltip: "আলহামদু লিল্লা হিল্লাজি আফানি ", loop: 3 },
          { id: "QA6jYhCXYyM", start: 0, end: 23, label: "ইসমে আজম", tooltip: "ইসমে আজম", loop: 21 },
          { id: "ueu7UtauHVc", start: 0, end: 66, label: "সূরা ফাতিহা", tooltip: "সূরা ফাতিহা", loop: 7 },
          { id: "ueu7UtauHVc", start: 0, end: 66, label: "সূরা দুহা", tooltip: "সূরা ফাতিহা", loop: 7 },
          { id: "zy3xIbbK6eE", start: 5, end: 130, label: "সূরা বাকারার শেষ দুই আয়াত", tooltip: "সূরা বাকারার শেষ দুই আয়াত", loop: 21 }
        ]
      },
      {
        name: "দোয়া কবুল হওয়ার আমল",
        videos: [
          { id: "6HPXBy9kLBA", start: 6, end: 11.8, label: "দরুদ শরীফ", tooltip: "দরুদ শরীফ", loop: 100 },
          { id: "v45_ITHAgdY", start: 47.5, end: 51, label: "লা হাওলা ওয়ালা কুওয়াতা ইল্লা বিল্লাহিল ", tooltip: "আল্লাহ ছাড়া কোনো ভরসা নেই, কোনো ক্ষমতা বা শক্তি নেই | প্রতিদিন 499 বার", loop: 499 },
          { id: "UFMf485VTiI", start: 45, end: 48.2, label: "লা হাওলা ওয়ালা কুওয়াতা ইল্লা বিল্লাহিল আলিউল আজিম", tooltip: "আল্লাহ ছাড়া কোনো ভরসা নেই, কোনো ক্ষমতা বা শক্তি নেই | প্রতিদিন 1 বার", loop: 1 },
          { id: "6HPXBy9kLBA", start: 6, end: 11.8, label: "দরুদ শরীফ", tooltip: "দরুদ শরীফ", loop: 100 },
          // { id: "6HPXBy9kLBA", start: 6, end: 30, label: "দরুদ শরীফ", tooltip: "দরুদ শরীফ", loop: 100 },
        ]
      },
      {
        name: "OTHERS",
        videos: [
          { id: "R8MyXEsY7gY", start: 11.2, end: 23, label: "মানসিক চাপ, বিষণ্ণতা এবং উদ্বেগে পড়ার জন্য দুআ", tooltip: "মানসিক চাপ, বিষণ্ণতা এবং উদ্বেগে পড়ার জন্য দুআ", loop: 3 },
          { id: "IQtvaAVEg8k", start: 0, end: 9.1, label: "হারাম করার ইচ্ছার বিরুদ্ধে দুআ", tooltip: "হারাম করার ইচ্ছার বিরুদ্ধে দুআ", loop: 3 },
          { id: "OHhcuL4eGbA", start: 26, end: 30, label: "See & Read for Sick Person", tooltip: "Read for the Sick Person", loop: 7 },
        ]
      }
    ];

    function generateDropdown() {
      const dropdown = document.getElementById('sectionDropdown');
      dropdown.innerHTML = '';
      videoSections.forEach((section, idx) => {
        const opt = document.createElement('option');
        opt.value = idx;
        opt.textContent = section.name;
        dropdown.appendChild(opt);
      });
    }

    function showSelectedSection() {
      const controlsDiv = document.getElementById('sectionControls');
      const sectionIdx = parseInt(document.getElementById('sectionDropdown').value, 10);
      const section = videoSections[sectionIdx];
      controlsDiv.innerHTML = '';

      // Remove any existing highlight
      const prevHighlighted = document.querySelector('.current-video');
      if (prevHighlighted) {
        prevHighlighted.classList.remove('current-video');
      }

      const header = document.createElement('div');
      header.className = 'section-header';
      header.textContent = section.name;
      controlsDiv.appendChild(header);

      const ul = document.createElement('ul');
      ul.className = 'video-list';
      section.videos.forEach((video, vIdx) => {
        const li = document.createElement('li');
        li.id = `section-${sectionIdx}-video-${vIdx}`;
        li.innerHTML = `<span class="video-serial">${vIdx + 1}.</span>
                        <span class="video-label">${video.label}</span>
                        <span class="video-loop">x${video.loop}</span>`;
        ul.appendChild(li);
      });
      controlsDiv.appendChild(ul);

      const btn = document.createElement('button');
      btn.className = 'section-btn';
      btn.textContent = `▶️ Play : ${section.name}`;
      btn.onclick = () => playSection(sectionIdx);
      controlsDiv.appendChild(btn);

      // Reset timer display
      resetSectionTimer(sectionIdx);
    }

    let player;
    let playerReady = false;
    let currentLoopCount = 0;
    let currentMaxLoops = 1;
    let currentStartTime = 0;
    let currentEndTime = 0;
    let currentVideoId = '';
    let loopInterval = null;
    let timerInterval = null;
    let sectionTimerSeconds = 0;
    let allSectionsTimerSeconds = 0;
    let allSectionsTimerInterval = null;
    let timersPaused = false;

    let currentSectionVideos = [];
    let playlistIndex = 0;
    let allSectionsMode = false;
    let allSectionsIndex = 0;

    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '100%',
        width: '100%',
        videoId: '',
        playerVars: {
          modestbranding: 1,
          rel: 0,
          autoplay: 0
        },
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
      });
    }

    function onPlayerReady() {
      playerReady = true;
      updateAllSectionsTimer();
    }

    function playSection(sectionIdx) {
      allSectionsMode = false;
      currentSectionVideos = videoSections[sectionIdx].videos;
      playlistIndex = 0;
      startSectionTimer(sectionIdx, 0, 0);
      updateAllSectionsTimer();
      playNextInSection();
    }

    function playNextInSection() {
      // Remove any existing highlight
      const prevHighlighted = document.querySelector('.current-video');
      if (prevHighlighted) {
        prevHighlighted.classList.remove('current-video');
      }

      if (playlistIndex >= currentSectionVideos.length) {
        if (allSectionsMode) {
          allSectionsIndex++;
          if (allSectionsIndex < videoSections.length) {
            currentSectionVideos = videoSections[allSectionsIndex].videos;
            playlistIndex = 0;
            showSelectedSectionByIndex(allSectionsIndex);
            startSectionTimer(allSectionsIndex, 0, 0);
            playNextInSection();
            return;
          } else {
            allSectionsMode = false;
          }
        }
        if (player && typeof player.pauseVideo === "function") {
          player.pauseVideo();
        }
        updateDisplay(0, 0);
        resetSectionTimer(-1);
        updateAllSectionsTimer();
        document.getElementById('tooltipText').textContent = '';
        return;
      }
      const item = currentSectionVideos[playlistIndex];
      currentVideoId = item.id;
      currentStartTime = item.start;
      currentEndTime = item.end;
      currentLoopCount = 0;
      currentMaxLoops = item.loop || 1;
      updateDisplay(0, currentMaxLoops);

      // Highlight the current video
      const currentSectionIndex = allSectionsMode ? allSectionsIndex : parseInt(document.getElementById('sectionDropdown').value, 10);
      const currentVideoElement = document.getElementById(`section-${currentSectionIndex}-video-${playlistIndex}`);
      if (currentVideoElement) {
        currentVideoElement.classList.add('current-video');
      }

      let sectionIdx = allSectionsMode ? allSectionsIndex : parseInt(document.getElementById('sectionDropdown').value, 10);
      if (currentLoopCount === 0 && playlistIndex === 0) {
        startSectionTimer(sectionIdx, playlistIndex, currentLoopCount);
      }

      player.loadVideoById({
        videoId: currentVideoId,
        startSeconds: currentStartTime
      });

      document.getElementById('tooltipText').textContent = item.tooltip || '';
      setTimeout(() => {
        if (typeof player.playVideo === "function") player.playVideo();
      }, 500);
    }

    function updateDisplay(played, remain) {
      document.getElementById("currentLoop").textContent = played;
      document.getElementById("remainingLoop").textContent = remain;
    }

    function onPlayerStateChange(event) {
      if (event.data === YT.PlayerState.PLAYING) {
        timersPaused = false;
        resumeTimers();
        startLoopCheck();
      } else if (event.data === YT.PlayerState.PAUSED) {
        timersPaused = true;
        pauseTimers();
        clearLoopInterval();
      } else if (event.data === YT.PlayerState.ENDED) {
        timersPaused = false;
        resumeTimers();
        clearLoopInterval();
      }
    }

    function startLoopCheck() {
      clearLoopInterval();
      loopInterval = setInterval(() => {
        if (!player || typeof player.getCurrentTime !== "function") return;
        const currentTime = player.getCurrentTime();
        let effectiveEndTime = currentEndTime || player.getDuration();

        if (currentTime >= effectiveEndTime) {
          currentLoopCount++;
          updateDisplay(currentLoopCount, currentMaxLoops - currentLoopCount);

          if (currentLoopCount < currentMaxLoops) {
            player.seekTo(currentStartTime);
            player.playVideo();
          } else {
            clearLoopInterval();
            playlistIndex++;
            playNextInSection();
          }
        }
      }, 200);
    }

    function clearLoopInterval() {
      if (loopInterval) {
        clearInterval(loopInterval);
        loopInterval = null;
      }
    }

    function playAllSections() {
      if (!playerReady) {
        alert("Player is not ready yet. Please wait a moment and try again.");
        return;
      }
      allSectionsMode = true;
      allSectionsIndex = 0;
      currentSectionVideos = videoSections[allSectionsIndex].videos;
      playlistIndex = 0;
      showSelectedSectionByIndex(allSectionsIndex);
      startSectionTimer(allSectionsIndex, 0, 0);
      startAllSectionsTimer();
      playNextInSection();
    }

    function showSelectedSectionByIndex(idx) {
      document.getElementById('sectionDropdown').value = idx;
      showSelectedSection();
    }

    // Section Timer functions
    function startSectionTimer(sectionIdx, currentVideoIdx, currentLoop) {
      clearInterval(timerInterval);
      sectionTimerSeconds = calcSectionSeconds(sectionIdx, currentVideoIdx, currentLoop);
      updateSectionTimerDisplay();
      if (sectionTimerSeconds > 0) {
        timerInterval = setInterval(() => {
          if (!timersPaused) {
            sectionTimerSeconds--;
            updateSectionTimerDisplay();
            if (sectionTimerSeconds <= 0) clearInterval(timerInterval);
          }
        }, 1000);
      }
    }

    function resetSectionTimer(sectionIdx) {
      clearInterval(timerInterval);
      sectionTimerSeconds = calcSectionSeconds(sectionIdx, 0, 0);
      updateSectionTimerDisplay();
    }

    function calcSectionSeconds(sectionIdx, currentVideoIdx, currentLoop) {
      if (sectionIdx < 0 || sectionIdx >= videoSections.length) return 0;
      const section = videoSections[sectionIdx];
      let totalSeconds = 0;
      if (section.videos[currentVideoIdx]) {
        let v = section.videos[currentVideoIdx];
        let duration = Math.max(1, (v.end - v.start));
        totalSeconds += duration * (v.loop - currentLoop);
      }
      for (let i = currentVideoIdx + 1; i < section.videos.length; i++) {
        let v = section.videos[i];
        let duration = Math.max(1, (v.end - v.start));
        totalSeconds += duration * v.loop;
      }
      return Math.floor(totalSeconds);
    }

    function updateSectionTimerDisplay() {
      const timerSpan = document.getElementById('sectionTimer');
      timerSpan.textContent = sectionTimerSeconds > 0 ? `⏳ ${formatTime(sectionTimerSeconds)}` : '';
    }

    // All Sections Timer functions
    function startAllSectionsTimer() {
      clearInterval(allSectionsTimerInterval);
      allSectionsTimerSeconds = calcAllSectionsSeconds();
      updateAllSectionsTimerDisplay();
      if (allSectionsTimerSeconds > 0) {
        allSectionsTimerInterval = setInterval(() => {
          if (!timersPaused) {
            allSectionsTimerSeconds--;
            updateAllSectionsTimerDisplay();
            if (allSectionsTimerSeconds <= 0) clearInterval(allSectionsTimerInterval);
          }
        }, 1000);
      }
    }

    function updateAllSectionsTimer() {
      clearInterval(allSectionsTimerInterval);
      allSectionsTimerSeconds = calcAllSectionsSeconds();
      updateAllSectionsTimerDisplay();
    }

    function calcAllSectionsSeconds() {
      let total = 0;
      for (let s = 0; s < videoSections.length; s++) {
        for (let v = 0; v < videoSections[s].videos.length; v++) {
          let vid = videoSections[s].videos[v];
          let duration = Math.max(1, (vid.end - vid.start));
          total += duration * vid.loop;
        }
      }
      return Math.floor(total);
    }

    function updateAllSectionsTimerDisplay() {
      const timerSpan = document.getElementById('allSectionsTimer');
      timerSpan.textContent = allSectionsTimerSeconds > 0 ? `⏳ ${formatTime(allSectionsTimerSeconds)}` : '';
    }

    function formatTime(sec) {
      let h = Math.floor(sec / 3600);
      let m = Math.floor((sec % 3600) / 60);
      let s = Math.floor(sec % 60);
      return (h > 0 ? h + 'h ' : '') + (m > 0 ? m + 'm ' : (h > 0 ? '0m ' : '')) + s + 's';
    }

    // Pause/resume timers
    function pauseTimers() {
      timersPaused = true;
    }
    function resumeTimers() {
      timersPaused = false;
    }

    // Skip button logic
    function skipCurrentContent() {
      // If currently playing, skip to next video
      if (player && typeof player.pauseVideo === "function") {
        player.pauseVideo();
      }
      clearLoopInterval();
      playlistIndex++;
      playNextInSection();
    }

    document.addEventListener('DOMContentLoaded', () => {
      generateDropdown();
      showSelectedSection();
      updateDisplay(0, 0);
      updateAllSectionsTimer();
    });
  </script>
</body>
</html>